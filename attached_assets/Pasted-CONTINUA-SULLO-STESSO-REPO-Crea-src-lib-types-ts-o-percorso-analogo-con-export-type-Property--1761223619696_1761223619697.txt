CONTINUA SULLO STESSO REPO.

Crea src/lib/types.ts (o percorso analogo) con:

export type Property = {
  id: string;
  slug?: string;
  title: string;
  location?: string;
  price?: string | number;
  images: string[];
  features?: { label: string; value: string }[];
  description?: string;
  publishedAt?: string;
};


Crea src/lib/slug.ts:

export function slugify(input: string): string {
  return input
    .toLowerCase()
    .normalize("NFD").replace(/[\u0300-\u036f]/g, "")
    .replace(/[^a-z0-9]+/g, "-")
    .replace(/^-+|-+$/g, "");
}


Crea src/lib/properties.ts con:

getAllProperties() che legge la fonte dati esistente (JSON/CMS/API). Non inventare i dati: riusa la stessa fonte già usata nella lista.

getPropertyBySlugOrId(key: string):

prova match per slug === key;

se non trovato, prova id === key;

se ancora non trovato e key sembra slug, estrai eventuale id finale -p<id> e riprova;

se la proprietà non ha slug, genera slugify(title) + "-p" + id" ma non scriverlo a db: esponilo solo a runtime.
Esporta entrambe.

Non rompere la lista: nessuna modifica ai componenti della grid ancora.

Stampa a console quanti immobili totali trova getAllProperties() per verifica.

Prompt 3 — Routing dinamico pagina dettaglio

Obiettivo: collegare la rotta dinamica al resolver dei dati, senza UI finale.

Testo da incollare in Replit:

CONTINUA SULLO STESSO REPO.
Integra il resolver nella rotta dinamica:

Next App Router (app/immobili/[slug]/page.tsx):

Importa getPropertyBySlugOrId e recupera i dati con async lato server.

Se non trovato → notFound().

Ritorna un <main> minimale con h1 titolo, placeholder “Gallery qui”, sezioni “Caratteristiche”/“Descrizione” condizionali (vuote per ora).

Esporta anche generateMetadata con title = Property.title e description = prima parte della descrizione (max 160 chars).

Next Pages Router (pages/immobili/[slug].tsx):

Usa getServerSideProps o getStaticProps + getStaticPaths se i dati lo consentono.

Stessa logica: se non trovato → 404.

React Router (/immobili/:slug → PropertyDetail.tsx):

Leggi slug da params, chiama getPropertyBySlugOrId.

Gestisci loading/error, se null → renderizza 404 component.
Lascia UI minimale (solo placeholder) — la UI la aggiungiamo nel prompt successivo.